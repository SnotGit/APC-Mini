# üéõÔ∏è WORKFLOW COMPLET - PAGE PADS

## üìã RESPONSABILIT√âS CLAIRES

### Pads-Content
- **Assignations couleurs** (vert/jaune/rouge/clear)
- **Assignations groupes** (1,2,3,4)
- **Affichage visuel** interface web + APC physique
- **Gestion highlights** groupes et s√©quenceur

### Sequencer-Content  
- **Logique s√©quenceur** uniquement
- **Ordre steps** selon mapping pads
- **Contr√¥les** play/stop/mode/scales

---

## üîÑ PERSISTANCE ET PRIORIT√â ASSIGNATIONS

### √âtats des Pads
```
PAD LIBRE ‚Üí Assignable en pads-mode ET groups-mode
PAD ASSIGN√â INDIVIDUELLEMENT ‚Üí Surcharge possible en groups-mode
PAD ASSIGN√â EN GROUPE ‚Üí Non-modifiable en pads-mode (occup√©)
PAD CONTR√îLE S√âQUENCEUR ‚Üí Non-assignable (r√©serv√© syst√®me)
```

### Transitions Modes

#### Groups-Mode ‚Üí Pads-Mode
```
Groupe enti√®rement assign√© ‚Üí Pads non-s√©lectionnables
Groupe partiellement assign√© ‚Üí Pads libres assignables  
Aucune assignation groupe ‚Üí Tous pads libres assignables
```

#### Pads-Mode ‚Üí Groups-Mode
```
Pads individuels assign√©s ‚Üí Highlights partiels groupe
Assignation groupe ‚Üí Surcharge pads individuels
Clear groupe ‚Üí Lib√®re tous les pads du groupe
```

### Exemples Concrets

#### Cas 1 : Groupe 1 Enti√®rement Rouge
```
Groups-mode : Assign rouge groupe 1 ‚Üí 16 pads rouges
Pads-mode : Clics pads groupe 1 ‚Üí Aucune action (occup√©s)
Pads-mode : Autres pads ‚Üí Assignables normalement
```

#### Cas 2 : Assignations Mixtes
```
Pads-mode : Pads 57,58,59 verts (individuels)
Groups-mode : Groupe 1 ‚Üí Highlights partiels (3 verts + 13 libres)
Groups-mode : Assign rouge groupe 1 ‚Üí Surcharge TOUT en rouge
```

#### Cas 3 : Lib√©ration
```
Groups-mode : Clear groupe 1 ‚Üí Lib√®re 16 pads
Pads-mode : 16 pads redeviennent assignables
```

---

## üîÑ WORKFLOW UTILISATEUR COMPLET

### PHASE 1 : Mode Pads

#### S√©lection Pad Individuel
```
Clic pad LIBRE ‚Üí S√©lection + info affich√©e
Clic pad ASSIGN√â (via groups-mode) ‚Üí Aucune action (pad occup√©)
Re-clic pad s√©lectionn√© SANS couleur ‚Üí D√©s√©lection
Re-clic pad s√©lectionn√© AVEC couleur ‚Üí Maintien s√©lection
Clic couleur ‚Üí Assignation + clear s√©lection
```

#### S√©lection Groupe  
```
Clic groupe ‚Üí S√©lection + highlights pads + hover bouton
Re-clic groupe SANS assignation ‚Üí D√©s√©lection + clear highlights
Re-clic groupe AVEC assignation ‚Üí Re-s√©lection + highlights
Clic couleur ‚Üí Assignation √† TOUS les pads du groupe
```

### PHASE 1.5 : Persistance Inter-Modes

#### Groups-Mode ‚Üí Pads-Mode
```
Assignations groups-mode ‚Üí PERSISTENT dans pads-mode
Pads assign√©s en groupe ‚Üí NON-S√âLECTIONNABLES en pads-mode
Pads libres ‚Üí Assignables individuellement en pads-mode
```

#### Pads-Mode ‚Üí Groups-Mode
```
Assignations pads-mode ‚Üí PERSISTENT dans groups-mode  
Groupe partiellement assign√© ‚Üí Highlights partiels + assignation groupe possible
Groupe compl√®tement assign√© ‚Üí Re-s√©lection groupe + surcharge possible
```

### PHASE 2 : Toggle S√©quenceur (16 Steps)

#### Activation S√©quenceur
```
Toggle ON ‚Üí Clear couleurs pads + highlights s√©quenceur blanc
         ‚Üí Pads contr√¥les activ√©s (couleurs sp√©cifiques)
         ‚Üí Couleurs groupes INTERDITES (boutons disabled)
```

#### D√©sactivation S√©quenceur  
```
Toggle OFF ‚Üí Clear highlights s√©quenceur
          ‚Üí Restore couleurs pads (si assign√©es avant)
          ‚Üí OU restore hover groupe (si pas couleurs)
          ‚Üí Couleurs groupes AUTORIS√âES
```

### PHASE 3 : Mode 32 Steps

#### Switch vers 32
```
Switch 32 ‚Üí Groupe 5 conceptuel actif (pads 57‚Üí40)
          ‚Üí Boutons 1,2 = hover permanent + disabled
          ‚Üí Boutons 3,4 = normaux + clicables
          ‚Üí Highlights 32 pads s√©quenceur
          ‚Üí Pads contr√¥les : 25,26,27,28 (comme groupe 1)
```

#### Switch retour 16
```
Switch 16 ‚Üí Retour groupe origine (1 ou 2)
          ‚Üí Boutons 1,2 = normaux + clicables
          ‚Üí Restore √©tat avant mode 32
```

---

## ‚ö†Ô∏è CONFLITS PADS CONTR√îLES

### Groupe 1 + S√©quenceur Actif
- **Pads occup√©s** : 25,26,27,28 (contr√¥les s√©quenceur)
- **Groupe 3 impact** : 12 pads disponibles au lieu de 16
- **Groupe 3 disponible** : 17,18,19,20,9,10,11,12,1,2,3,4

### Groupe 2 + S√©quenceur Actif  
- **Pads occup√©s** : 29,30,31,32 (contr√¥les s√©quenceur)
- **Groupe 4 impact** : 12 pads disponibles au lieu de 16
- **Groupe 4 disponible** : 21,22,23,24,13,14,15,16,5,6,7,8

### Mode 32 Steps (Groupe 5) + S√©quenceur
- **Pads occup√©s** : 25,26,27,28 (contr√¥les s√©quenceur)
- **Groupes 3,4** : normaux (pas d'impact)

---

## üéØ ORDRE S√âQUENCE (CRITIQUE)

### Groupe 1 (16 steps)
**Ordre** : 57‚Üí58‚Üí59‚Üí60‚Üí49‚Üí50‚Üí51‚Üí52‚Üí41‚Üí42‚Üí43‚Üí44‚Üí33‚Üí34‚Üí35‚Üí36
**Logique** : Ligne par ligne, gauche vers droite

### Groupe 2 (16 steps)
**Ordre** : 61‚Üí62‚Üí63‚Üí64‚Üí53‚Üí54‚Üí55‚Üí56‚Üí45‚Üí46‚Üí47‚Üí48‚Üí37‚Üí38‚Üí39‚Üí40
**Logique** : Ligne par ligne, gauche vers droite

### Groupe 5 (32 steps) 
**Ordre** : 57‚Üí58‚Üí59‚Üí60‚Üí61‚Üí62‚Üí63‚Üí64‚Üí49‚Üí50‚Üí51‚Üí52‚Üí53‚Üí54‚Üí55‚Üí56‚Üí41‚Üí42‚Üí43‚Üí44‚Üí45‚Üí46‚Üí47‚Üí48‚Üí33‚Üí34‚Üí35‚Üí36‚Üí37‚Üí38‚Üí39‚Üí40
**Logique** : Toute la grille sup√©rieure, ligne par ligne

---

## üé® √âTATS VISUELS

### Interface Web
- **Hover groupe** : bouton surlign√© + pads highlights
- **S√©quenceur actif** : highlights blancs permanents  
- **Couleurs assign√©es** : vert/jaune/rouge selon assignation
- **Mode 32** : boutons 1,2 hover permanent + disabled

### APC Physique
- **Base** : tous pads OFF (noirs)
- **Couleurs assign√©es** : vert/jaune/rouge selon assignation
- **Contr√¥les s√©quenceur** : couleurs sp√©cifiques + clignotements
- **Press pad** : couleur temporaire pendant appui

---

## ‚öôÔ∏è COMMUNICATION MODULES

### Pads-Content (HUB CENTRAL)
```
Re√ßoit de PadsMode ‚Üí apply-pad-color (si pad libre)
Re√ßoit de GroupsMode ‚Üí apply-group-color + sequencer-config  
Envoie vers MIDI ‚Üí couleurs LED temps r√©el
Envoie vers SequencerContent ‚Üí config s√©quenceur
G√®re ‚Üí persistance assignations inter-modes
V√©rifie ‚Üí disponibilit√© pads selon mode
```

### GroupsMode 
```
G√®re ‚Üí s√©lection groupes + toggle s√©quenceur + switch 16/32
Envoie vers PadsContent ‚Üí highlights + config + surcharge assignations
Re√ßoit de SequencerMode ‚Üí √©tats toggle/switch
Affiche ‚Üí highlights partiels si assignations mixtes
```

### PadsMode
```
G√®re ‚Üí s√©lection pads individuels + info affichage
Envoie vers PadsContent ‚Üí apply-pad-color (avec v√©rification)
Re√ßoit ‚Üí √©tat assignations existantes pour filtrer pads clicables
Affiche ‚Üí seulement info pads non-occup√©s par groupes
```

### PadsColors
```
G√®re ‚Üí boutons couleurs + autorisations
Envoie vers PadsContent ‚Üí assignations couleurs  
√âtat ‚Üí enabled/disabled selon mode s√©quenceur + disponibilit√© pads
Logique ‚Üí surcharge groupes vs protection pads individuels
```

---

## üîí IMPLICATIONS TECHNIQUES

### Tracking Assignations
```
PadsContent doit tracker :
- padColors[padNumber] = 'red' // Assignation individuelle
- groupAssignments[groupId] = 'green' // Assignation groupe
- Priorit√© : groupe > individuel
```

### Validation Clics
```
PadsMode.handlePadClick() :
- V√©rifier si pad libre (pas dans groupe assign√©)
- V√©rifier si pad non-contr√¥le s√©quenceur
- Autoriser s√©lection seulement si disponible
```

### Interface Visuelle
```
Pads occup√©s (groups-mode) :
- Couleur assign√©e affich√©e
- Hover d√©sactiv√©
- Cursor: not-allowed
- Classes CSS distinctes
```

---

## üéØ R√âSULTAT FINAL

**Page Pads** = Interface compl√®te pour :
1. **Assignations couleurs** (pads individuels + groupes)
2. **Configuration s√©quenceur** (toggle + 16/32 steps)  
3. **Feedback visuel** (interface + APC synchronis√©s)
4. **Gestion conflits** (pads contr√¥les vs groupes)

**Communication** vers **Sequencer-Content** pour ex√©cution s√©quences selon configuration √©tablie.